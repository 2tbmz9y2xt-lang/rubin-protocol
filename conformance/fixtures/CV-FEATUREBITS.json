{
  "gate": "CV-FEATUREBITS",
  "vectors": [
    {
      "id": "CV-FB-01-defined-before-start",
      "op": "featurebits_state",
      "name": "X",
      "bit": 0,
      "start_height": 5000,
      "timeout_height": 100000,
      "height": 0,
      "window_signal_counts": [],
      "expect_ok": true,
      "expect_state": "DEFINED",
      "expect_boundary_height": 0,
      "expect_prev_window_signal_count": 0,
      "expect_signal_window": 2016,
      "expect_signal_threshold": 1815
    },
    {
      "id": "CV-FB-02-started-at-first-boundary",
      "op": "featurebits_state",
      "name": "X",
      "bit": 0,
      "start_height": 1,
      "timeout_height": 100000,
      "height": 2016,
      "window_signal_counts": [1815],
      "expect_ok": true,
      "expect_state": "STARTED",
      "expect_boundary_height": 2016,
      "expect_prev_window_signal_count": 1815
    },
    {
      "id": "CV-FB-03-single-step-no-double-transition",
      "op": "featurebits_state",
      "name": "X",
      "bit": 0,
      "start_height": 0,
      "timeout_height": 100000,
      "height": 0,
      "window_signal_counts": [],
      "expect_ok": true,
      "expect_state": "STARTED",
      "expect_boundary_height": 0,
      "expect_prev_window_signal_count": 0
    },
    {
      "id": "CV-FB-04-lock-in",
      "op": "featurebits_state",
      "name": "X",
      "bit": 0,
      "start_height": 0,
      "timeout_height": 100000,
      "height": 2016,
      "window_signal_counts": [1815],
      "expect_ok": true,
      "expect_state": "LOCKED_IN",
      "expect_boundary_height": 2016,
      "expect_prev_window_signal_count": 1815,
      "expect_estimated_activation_height": 4032
    },
    {
      "id": "CV-FB-05-locked-in-to-active",
      "op": "featurebits_state",
      "name": "X",
      "bit": 0,
      "start_height": 0,
      "timeout_height": 100000,
      "height": 4032,
      "window_signal_counts": [1815, 0],
      "expect_ok": true,
      "expect_state": "ACTIVE",
      "expect_boundary_height": 4032,
      "expect_prev_window_signal_count": 0
    },
    {
      "id": "CV-FB-06-timeout-to-failed",
      "op": "featurebits_state",
      "name": "X",
      "bit": 0,
      "start_height": 0,
      "timeout_height": 2016,
      "height": 2016,
      "window_signal_counts": [0],
      "expect_ok": true,
      "expect_state": "FAILED",
      "expect_boundary_height": 2016,
      "expect_prev_window_signal_count": 0
    },
    {
      "id": "CV-FB-07-lock-in-wins-over-timeout",
      "op": "featurebits_state",
      "name": "X",
      "bit": 0,
      "start_height": 0,
      "timeout_height": 2016,
      "height": 2016,
      "window_signal_counts": [1815],
      "expect_ok": true,
      "expect_state": "LOCKED_IN",
      "expect_boundary_height": 2016,
      "expect_prev_window_signal_count": 1815
    },
    {
      "id": "CV-FB-08-non-boundary-height-rule",
      "op": "featurebits_state",
      "name": "X",
      "bit": 0,
      "start_height": 0,
      "timeout_height": 100000,
      "height": 2026,
      "window_signal_counts": [1815],
      "expect_ok": true,
      "expect_state": "LOCKED_IN",
      "expect_boundary_height": 2016,
      "expect_prev_window_signal_count": 1815
    },
    {
      "id": "CV-FB-09-bit-out-of-range",
      "op": "featurebits_state",
      "name": "X",
      "bit": 32,
      "start_height": 0,
      "timeout_height": 1,
      "height": 0,
      "window_signal_counts": [],
      "expect_ok": false,
      "expect_err": "featurebits: bit out of range: 32"
    }
  ]
}

