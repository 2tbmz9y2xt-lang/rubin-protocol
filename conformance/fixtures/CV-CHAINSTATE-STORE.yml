version: "1.1"
gate: CV-CHAINSTATE-STORE
status: PASS
description: "Phase 1: persistent-store chainstate parity via init/import-block/utxo-set-hash (Go bbolt vs Rust redb)"
tests:
  - id: CS-01
    title: "Linear chain N=10 (coinbase-only blocks) yields identical utxo_set_hash"
    profile: "spec/RUBIN_L1_CHAIN_INSTANCE_PROFILE_DEVNET_v1.1.md"
    plan:
      kind: linear
      blocks: 10
    expected_code: PASS

  - id: CS-02
    title: "2-block reorg: fork wins by higher cumulative work"
    profile: "spec/RUBIN_L1_CHAIN_INSTANCE_PROFILE_DEVNET_v1.1.md"
    plan:
      kind: reorg
      # Import A1..A3, then B2..B4 where fork point is height 1.
      main_len: 3
      fork_point: 1
      fork_len: 4
    expected_code: PASS

  - id: CS-03
    title: "Deep reorg (depth=25): fork wins by higher cumulative work"
    profile: "spec/RUBIN_L1_CHAIN_INSTANCE_PROFILE_DEVNET_v1.1.md"
    plan:
      kind: reorg
      main_len: 30
      fork_point: 5
      fork_len: 35
    expected_code: PASS

